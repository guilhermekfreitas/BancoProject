/*
 * To change this template, choose Tools | Templates
 * and open the template in the editor.
 */

/*
 * Saque.java
 *
 * Created on 05/09/2010, 16:40:07
 */

package banco.cliente;

import javax.swing.*;

import banco.cliente.util.TipoComando;

/**
 *
 * @author usuariio
 */
public class Movimento extends JFrame {

    private JButton btnCancelar;
    private JButton btnConfirmar;
    private JComboBox jComboBox1;
    private JLabel jLabel3;
    private JLabel lbMovimentacao;
    private JLabel lbNome;
    private JLabel lbNome2;
    private JLabel lbSaldo;
    private JLabel lbSaldo2;
    private JLabel lbValor;
    private JTextField tfValor;
	
    /** Creates new form Saque */
    public Movimento() {
        initComponents();
        lbNome2.setText(banco.cliente.deprecated.Login.cliNome.toString());
        String mesg = "6 ";
        mesg.concat(banco.cliente.deprecated.Login.cliConta);
        CliThread saldo = new CliThread();
        String retorno = saldo.comunicaServidor(mesg, banco.cliente.deprecated.Login.cliServidor.toString());
        lbSaldo2.setText(retorno);
    }

    /** This method is called from within the constructor to
     * initialize the form.
     * WARNING: Do NOT modify this code. The content of this method is
     * always regenerated by the Form Editor.
     */
    @SuppressWarnings("unchecked")
    // <editor-fold defaultstate="collapsed" desc="Generated Code">//GEN-BEGIN:initComponents
    private void initComponents() {

        jLabel3 = new JLabel();
        lbMovimentacao = new JLabel();
        lbValor = new JLabel();
        tfValor = new JTextField();
        btnConfirmar = new JButton();
        btnCancelar = new JButton();
        jComboBox1 = new JComboBox();
        lbNome = new JLabel();
        lbNome2 = new JLabel();
        lbSaldo = new JLabel();
        lbSaldo2 = new JLabel();

        jLabel3.setText("jLabel3");

        setDefaultCloseOperation(WindowConstants.DISPOSE_ON_CLOSE);
        setTitle("Movimenta√ß√µes");
        setResizable(false);

        lbMovimentacao.setText("MovimentaÁ„o: ");

        lbValor.setText("Valor: ");

        btnConfirmar.setText("Confirmar");
        btnConfirmar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnConfirmarActionPerformed(evt);
            }
        });

        btnCancelar.setText("Cancelar");
        btnCancelar.addActionListener(new java.awt.event.ActionListener() {
            public void actionPerformed(java.awt.event.ActionEvent evt) {
                btnCancelarActionPerformed(evt);
            }
        });

        jComboBox1.setModel(new DefaultComboBoxModel(new String[] { "Saque", "Dep√≥sito" }));

        lbNome.setText("Nome:");

        lbNome2.setText("Nome Completo");

        lbSaldo.setText("Saldo: ");

        lbSaldo2.setText("Saldo");

        GroupLayout layout = new GroupLayout(getContentPane());
        getContentPane().setLayout(layout);
        layout.setHorizontalGroup(
            layout.createParallelGroup(GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(GroupLayout.Alignment.LEADING)
                    .addComponent(lbMovimentacao)
                    .addComponent(lbSaldo)
                    .addComponent(lbValor)
                    .addComponent(lbNome))
                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(GroupLayout.Alignment.LEADING)
                    .addComponent(lbNome2)
                    .addComponent(tfValor, GroupLayout.DEFAULT_SIZE, 160, Short.MAX_VALUE)
                    .addComponent(lbSaldo2)
                    .addGroup(layout.createParallelGroup(GroupLayout.Alignment.LEADING, false)
                        .addComponent(jComboBox1, 0, 158, Short.MAX_VALUE)
                        .addGroup(GroupLayout.Alignment.TRAILING, layout.createSequentialGroup()
                            .addComponent(btnConfirmar)
                            .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                            .addComponent(btnCancelar))))
                .addContainerGap(49, Short.MAX_VALUE))
        );
        layout.setVerticalGroup(
            layout.createParallelGroup(GroupLayout.Alignment.LEADING)
            .addGroup(layout.createSequentialGroup()
                .addContainerGap()
                .addGroup(layout.createParallelGroup(GroupLayout.Alignment.BASELINE)
                    .addComponent(lbNome)
                    .addComponent(lbNome2))
                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(GroupLayout.Alignment.BASELINE)
                    .addComponent(lbSaldo)
                    .addComponent(lbSaldo2))
                .addPreferredGap(LayoutStyle.ComponentPlacement.RELATED)
                .addGroup(layout.createParallelGroup(GroupLayout.Alignment.BASELINE)
                    .addComponent(lbMovimentacao)
                    .addComponent(jComboBox1, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE))
                .addGap(8, 8, 8)
                .addGroup(layout.createParallelGroup(GroupLayout.Alignment.BASELINE)
                    .addComponent(tfValor, GroupLayout.PREFERRED_SIZE, GroupLayout.DEFAULT_SIZE, GroupLayout.PREFERRED_SIZE)
                    .addComponent(lbValor))
                .addGap(15, 15, 15)
                .addGroup(layout.createParallelGroup(GroupLayout.Alignment.BASELINE)
                    .addComponent(btnConfirmar)
                    .addComponent(btnCancelar))
                .addContainerGap(14, Short.MAX_VALUE))
        );

        pack();
    }// </editor-fold>//GEN-END:initComponents

    public JLabel getLbMovimentacao() {
        return lbMovimentacao;
    }

    public void setLbMovimentacao(JLabel lbMovimentacao) {
        this.lbMovimentacao = lbMovimentacao;
    }

    public JLabel getLbNome2() {
        return lbNome2;
    }

    public void setLbNome2(JLabel lbNome2) {
        this.lbNome2 = lbNome2;
    }

    public JLabel getLbSaldo2() {
        return lbSaldo2;
    }

    public void setLbSaldo2(JLabel lbSaldo2) {
        this.lbSaldo2 = lbSaldo2;
    }

    public JTextField getTfValor() {
        return tfValor;
    }

    public void setTfValor(JTextField tfValor) {
        this.tfValor = tfValor;
    }

    private void btnCancelarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnCancelarActionPerformed
        this.dispose();
    }//GEN-LAST:event_btnCancelarActionPerformed

    String msg = "";
    private void btnConfirmarActionPerformed(java.awt.event.ActionEvent evt) {//GEN-FIRST:event_btnConfirmarActionPerformed
        boolean valida = true;
        if(tfValor.toString().equals("")||tfValor.toString().equals(" ")){
            JOptionPane.showMessageDialog(null, "Campo Valor em branco.", "Erro!", JOptionPane.OK_OPTION);
            valida = false;
        }else {
            if (jComboBox1.getSelectedItem().equals("Saque")) {
                msg = "4 " + banco.cliente.deprecated.Login.cliConta.toString() + " " + tfValor.toString();

            } else if (jComboBox1.getSelectedItem().equals("Dep√≥sito")) {
                msg = TipoComando.DEPOSITO + " " + banco.cliente.deprecated.Login.cliConta.toString() + " " + tfValor.toString();
            }
            CliThread mov = new CliThread();
            String retorno = mov.comunicaServidor(msg, banco.cliente.deprecated.Login.cliServidor.toString());
            if (retorno.startsWith("0")) {
                JOptionPane.showMessageDialog(null, "Falha na opera√ß√£o. Tente novamente!", "Erro!", JOptionPane.ERROR_MESSAGE);
            } else {
                JOptionPane.showMessageDialog(null, "Seu saldo atual √©: " + retorno.toString(), "Opera√ß√£o realizada com sucesso!", JOptionPane.OK_OPTION);
            }
        }
    }//GEN-LAST:event_btnConfirmarActionPerformed

    

}
